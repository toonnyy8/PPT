<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8">

	<title>Attention Is All You Need 報告</title>

	<meta name="description" content="A framework for easily creating beautiful presentations using HTML">
	<meta name="author" content="Hakim El Hattab">

	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<link rel="stylesheet" href="css/reset.css">
	<link rel="stylesheet" href="css/reveal.css">
	<link rel="stylesheet" href="css/theme/black.css" id="theme">
	<style>
		@import url("./css/index.css");
	</style>

	<!-- Theme used for syntax highlighting of code -->
	<link rel="stylesheet" href="lib/css/monokai.css">

	<!-- Printing and PDF exports -->
	<script>
		var link = document.createElement('link');
		link.rel = 'stylesheet';
		link.type = 'text/css';
		link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
		document.getElementsByTagName('head')[0].appendChild(link);
	</script>
	<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
	</script>

	<style>
		@font-face {
			font-family: custom-serif;
			src: local(Microsoft JhengHei), local("DFKai-sb");
			unicode-range: U+4E00-9FFF;
		}

		@font-face {
			font-family: custom-serif;
			src: local(Source Code Pro), local(Arial);
			unicode-range: U+00-024F;
		}

		section {
			font-family: custom-serif;
		}
	</style>

	<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
</head>

<body>

	<div class="reveal">

		<!-- Any section element inside of this container is displayed as a slide -->
		<div class="slides">
			<section>
				<p style="font-size: 150%;">
					<a href="https://arxiv.org/abs/1706.03762">Attention Is All You Need</a>
				</p>
				<br />
				<p style="font-size: 60%;text-align:left;position: relative;left:10%;">
					<nobr>Ashish Vaswani</nobr>,
					<nobr>Noam Shazeer</nobr>,
					<nobr>Niki Parmar</nobr>,
					<nobr>Jakob Uszkoreit</nobr>,
					<nobr>Llion Jones</nobr>,
					<nobr>Aidan N. Gomez</nobr>,
					<nobr>Lukasz Kaiser</nobr>,
					<nobr>Illia Polosukhin</nobr>
				</p>
				<p style="font-size: 60%;text-align:left;position: relative;left:10%;">
					<nobr>The International Conference on Neural Information Processing
						Systems (NIPS'17),</nobr>
					<nobr>pp. 6000–6010, Dec. 2017</nobr>
				</p>
			</section>

			<!-- 目錄 -->
			<section>
				<h3>目錄</h3>
				<ol>
					<li>
						<p>
							<nobr><a href="index.html#/2">背景知識</a></nobr>
						</p>
					</li>
					<li>
						<p>
							<nobr><a href="index.html#/3">Transformer 簡介</a></nobr>
						</p>
					</li>
					<li>
						<p>
							<nobr><a href="index.html#/4">認真拆解 Transformer</a></nobr>
						</p>
					</li>
					<li>
						<p>
							<nobr><a href="index.html#/5">實驗結果&結論</a></nobr>
						</p>
					</li>
					<li>
						<p>
							<nobr><a href="index.html#/6">Train & Usage</a></nobr>
						</p>
					</li>
					<li>
						<p>
							<nobr><a href="index.html#/7">參考資料</a></nobr>
						</p>
					</li>
				</ol>

			</section>

			<!-- 背景知識 -->
			<section>
				<section>
					<p style="font-size: 150%;">
						背景知識
					</p>
					<ol>
						<li><a href="index.html#/2/1">Attention</a></li>
						<li><a href="index.html#/2/6">Word Embedding</a></li>
					</ol>
				</section>

				<!-- Attention -->
				<section>
					<p style="font-size: 150%;">
						Attention？
					</p>
				</section>

				<section>
					<div class="flex flex-row">
						<div class="w-1/3">
							<video autoplay muted loop>
								<source src="./img/attention.mkv" type="video/mp4">
							</video>
						</div>
						<div>
							<p class="fragment fade-up pl-10 pt-10 text-left">
								你的視線是不是集中在
								<br />
								這隻史萊姆身上？ </p>
						</div>
				</section>

				<section>
					<img src="./img/attention.png" />
				</section>

				<section>
					<p>
						注意力機制「太」簡單的理解就是
					</p>
					<p class="fragment fade-up">
						「賦予剛剛<strong class="text-red-500">標記的位置</strong>較大的權重」
					</p>
					<p class="fragment fade-up text-3xl">
						像是 LSTM 的記憶機制其實就是一種 Attention
					</p>
				</section>

				<section>
					<ol>
						<li>Soft Attention</li>
						<li>Hard Attention</li>
						<li>Local Attention</li>
						<li>Global Attention</li>
						<li>
							<strong class="text-orange-500">Self Attention</strong>
						</li>
					</ol>
					<p class="fragment fade-up">
						今天只會講解 Self Attention
					</p>
				</section>

				<!-- Word Embedding -->
				<section>
					<p style="font-size: 150%;">
						Word Embedding
					</p>
				</section>

				<section>
					<p>
						在 NLP 領域中，要對文本進行前處理
					</p>
					<br />
					<ol class="fragment fade-up">
						<li>建字典</li>
						<li>切文本</li>
						<li>轉換 Symbol</li>
					</ol>
				</section>

				<section>
					<p class="text-left pl-24">
						建字典
					</p>
					<p class="text-left pl-32">
						為所有可能出現的 Symbol 標上 ID
					</p>
				</section>

				<section>
					<p class="text-left pl-24">
						切文本
					</p>
					<p class="text-left pl-32">
						將文本分割成多個 Symbol 並取得其 ID，
						<br />
						Symbol 的單位可以是 Token 或是 Character
					</p>
				</section>
				<section>
					<p class="text-left pl-24">
						轉換 Symbol
					</p>
					<ul class="fragment fade-up">
						<li>One Hot Encoding</li>
						<li>Word Embedding</li>
					</ul>
				</section>
				<section>
					<img src="./img/one_hot_encoding.png" />
					One Hot Encoding
				</section>
				<section>
					<p class="text-left pl-64">
						缺點
					</p>
					<ul>
						<li class="fragment fade-up">太~大~~</li>
						<li class="fragment fade-up">資訊稀疏</li>
					</ul>
				</section>

				<section>
					<img src="./img/embedding_2.png" />
					Word Embedding
				</section>
				<section>
					<p class="text-left pl-24">建構 Embedding Table</p>
					<p class="text-left pl-24">附註：Embedding Table 將會一起被訓練</p>

				</section>
				<section>
					<img src="./img/embedding_0.png" />
					Embedding Table
				</section>
				<section>
					<img src="./img/embedding_1.png" />
					查找 Table
				</section>
				<section>
					<img src="./img/embedding_2.png" />
					完成轉換
				</section>
				<section>
					<p class="text-left pl-48">
						優點
					</p>
					<ul>
						<li class="fragment fade-up">較小</li>
						<li class="fragment fade-up">
							資訊緊緻，
							<br />
							可表示出 Symbol 之間的關係
						</li>
					</ul>
				</section>
			</section>

			<!-- Transformer 簡介 -->
			<section>
				<section>
					<p style="font-size: 150%;">
						Transformer 簡介
					</p>
					<p class="fragment fade-up">
						由<strong class="text-red-500">注意力機制</strong>組成的全新架構
					</p>
				</section>

				<section>
					<p class="text-left pl-24">
						在 <del>NLP 的領域中</del> 處理時序相關的問題時
					</p>
					<p class="text-left pl-24 fragment fade-up">
						通常會使用 RNN、LSTM 等等架構來解決
					</p>
					<p class="text-left pl-24 fragment fade-up">
						到後來還用上了<strong>注意力機制</strong>
					</p>
				</section>

				<section>
					<img src="./img/rnn.png" />
					RNN
				</section>

				<section>
					<p>
						但是這類模型受到並行性限制影響
					</p>
					<p class="fragment fade-up">
						非常的緩～～～～～～～～～～慢
					</p>
				</section>

				<section>
					<p class="text-left pl-24">
						所以在 2017 年，
					</p>
					<p class="text-left pl-24">
						由 Attention 組成
					</p>
					<p class="text-left pl-24">
						全新的架構「Transformer」閃亮登場。
					</p>
				</section>

				<section>
					<p class="text-left pl-24">
						<del>自此 RNN 便成為歷史</del>
					</p>
					<p class="text-left pl-24 fragment fade-up">
						並沒有！</p>
					<p class="text-left pl-24 fragment fade-up">後來還轉職成「<a
							href="https://arxiv.org/abs/1901.02860">Transformer XL</a>」的專業輔助
					</p>
					<p class="text-left pl-24 fragment fade-up">
						但這不是今天要聊的（逃</p>
				</section>

				<section>
					<p class="text-left pl-10">
						在正式解構 Transformer 前，<br />
						先介紹其訓練與使用方式。
					</p>
					<p class="text-left pl-10 flex items-center fragment fade-up">
						<span class="pr-10">不然後面會越來越</span><img class="w-64" src="./img/黑人問號.jpg" />
					</p>
				</section>

				<section>
					<p>
						Output 的 Sequence length 與 Target 相同
					</p>
					<img class="" src="./img/black_box.png" />
					輸入與輸出
				</section>

				<section>
					<p>
						在訓練時會先準備兩筆資料
					</p>
					<ul>
						<li>來源文本</li>
						<li>目標文本</li>
					</ul>
					<p class="fragment fade-up">
						並將兩者<span class="text-yellow-500">拆成 Symbol </span>後加上
						<br />
						<span class="text-pink-500">「起始符號」</span>與<span class="text-pink-500">「結束符號」</span>
					</p>
				</section>

				<section>
					<p class="text-left pl-10">
						來源文本：<span class="text-green-400">Attention is all you need</span>
					</p>
					<p class="text-left pl-10 fragment fade-up">
						處理後：<br />
						<span class="text-pink-500">&lt;START&gt;</span>,
						<span class="text-green-400">Attention</span>,
						<span class="text-green-400">is</span>,
						<span class="text-green-400">all</span>,
						<span class="text-green-400">you</span>,
						<span class="text-green-400">need</span>,
						<span class="text-pink-500">&lt;END&gt;</span>
					</p>
				</section>

				<section>
					<p class="text-left pl-10">
						目標文本：<span class="text-orange-400">注意力就是你所需要的</span>
					</p>
					<p class="text-left pl-10 fragment fade-up">
						處理後：<br />
						<span class="text-pink-500">&lt;START&gt;</span>,
						<span class="text-orange-400">注意力</span>,
						<span class="text-orange-400">就是</span>,
						<span class="text-orange-400">你</span>,
						<span class="text-orange-400">所</span>,
						<span class="text-orange-400">需要</span>,
						<span class="text-orange-400">的</span>,
						<span class="text-pink-500">&lt;END&gt;</span>
					</p>
				</section>

				<section>
					<p class="text-left pl-10">
						Input：<strong class="text-green-400">來源文本</strong> 轉換成的 <strong class="text-yellow-500">Symbol
							ID</strong> Sequence
					</p>
					<p class="text-left pl-10 fragment fade-up">
						Target：<br />
						<strong class="text-orange-400">目標文本[:-1]</strong> 轉換成的 <strong class="text-yellow-500">Symbol
							ID</strong> Sequence
					</p>
					<p class="text-left pl-10 fragment fade-up">
						Output：預測的 <strong class="text-pink-500">One Hot Encoding</strong> Sequence
					</p>
					<p class="text-left pl-10 fragment fade-up">
						Ground Truth：<br />
						<strong class="text-orange-400">目標文本[1:]</strong> 的 <strong class="text-pink-500">One Hot
							Encoding</strong> Sequence
					</p>
				</section>
				<section>
					<img src="./img/黑人問號.jpg" />
				</section>

				<section>
					<p class="text-left pl-10">
						Input：
						<br /><span class="text-pink-500">&lt;START&gt;</span>,
						<span class="text-green-400">Attention</span>,
						<span class="text-green-400">is</span>,
						<span class="text-green-400">all</span>,
						<span class="text-green-400">you</span>,
						<span class="text-green-400">need</span>,
						<span class="text-pink-500">&lt;END&gt;</span>
					</p>
					<p class="text-left pl-10">
						Target：
						<br />
						<span class="text-pink-500">&lt;START&gt;</span>,
						<span class="text-orange-400">注意力</span>,
						<span class="text-orange-400">就是</span>,
						<span class="text-orange-400">你</span>,
						<span class="text-orange-400">所</span>,
						<span class="text-orange-400">需要</span>,
						<span class="text-orange-400">的</span>,
						<del class="text-red-600">&lt;END&gt;</del>
					</p>

					<p class="text-left pl-10">
						Ground Truth：
						<br />
						<del class="text-red-600">&lt;START&gt;</del>,
						<span class="text-orange-400">注意力</span>,
						<span class="text-orange-400">就是</span>,
						<span class="text-orange-400">你</span>,
						<span class="text-orange-400">所</span>,
						<span class="text-orange-400">需要</span>,
						<span class="text-orange-400">的</span>,
						<span class="text-pink-500">&lt;END&gt;</span>
					</p>
				</section>

				<section>
					<p class="text-left pl-10">
						講人話就是：
					</p>
					<p class="text-left pl-10">
						希望模型能預測出 <span class="text-orange-400">Target</span> 的下一個字該是什麼
					</p>
				</section>

				<section>
					<img src="./img/encoder-decoder.png" />
					Transformer
				</section>
				<section>
					\[\begin{aligned}
					V, K, Q
					\end{aligned} \]
				</section>
				<section>
					以 NLP 為例，
					訓練時
					inp=inp
					decoder_inp=tar[:-1]
					tar_real (Grou Truth)=tar[1:]

					使用時
					decoder_inp=start token
				</section>
			</section>

			<!-- 認真拆解 Transformer -->
			<section>
				<section>
					<p style="font-size: 150%;">
						認真拆解 Transformer
					</p>
					<ol>
						<li>拆解</li>
						<li>Position Encoding</li>
						<li>Masking</li>
						<li>Scaled Dot Product Attention</li>
						<li>Point wise feed forward network</li>
						<li>組合</li>
					</ol>
				</section>
			</section>

			<section id="transitions">
				<h2>Transition Styles</h2>
				<p>
					You can select from different transitions, like: <br>
					<a href="?transition=none#/transitions">None</a> -
					<a href="?transition=fade#/transitions">Fade</a> -
					<a href="?transition=slide#/transitions">Slide</a> -
					<a href="?transition=convex#/transitions">Convex</a> -
					<a href="?transition=concave#/transitions">Concave</a> -
					<a href="?transition=zoom#/transitions">Zoom</a>
				</p>
			</section>

			<section id="themes">
				<h2>Themes</h2>
				<p>
					reveal.js comes with a few themes built in: <br>
					<!-- Hacks to swap themes after the page has loaded. Not flexible and only intended for the reveal.js demo deck. -->
					<a href="#"
						onclick="document.getElementById('theme').setAttribute('href','css/theme/black.css'); return false;">Black
						(default)</a> -
					<a href="#"
						onclick="document.getElementById('theme').setAttribute('href','css/theme/white.css'); return false;">White</a>
					-
					<a href="#"
						onclick="document.getElementById('theme').setAttribute('href','css/theme/league.css'); return false;">League</a>
					-
					<a href="#"
						onclick="document.getElementById('theme').setAttribute('href','css/theme/sky.css'); return false;">Sky</a>
					-
					<a href="#"
						onclick="document.getElementById('theme').setAttribute('href','css/theme/beige.css'); return false;">Beige</a>
					-
					<a href="#"
						onclick="document.getElementById('theme').setAttribute('href','css/theme/simple.css'); return false;">Simple</a>
					<br>
					<a href="#"
						onclick="document.getElementById('theme').setAttribute('href','css/theme/serif.css'); return false;">Serif</a>
					-
					<a href="#"
						onclick="document.getElementById('theme').setAttribute('href','css/theme/blood.css'); return false;">Blood</a>
					-
					<a href="#"
						onclick="document.getElementById('theme').setAttribute('href','css/theme/night.css'); return false;">Night</a>
					-
					<a href="#"
						onclick="document.getElementById('theme').setAttribute('href','css/theme/moon.css'); return false;">Moon</a>
					-
					<a href="#"
						onclick="document.getElementById('theme').setAttribute('href','css/theme/solarized.css'); return false;">Solarized</a>
				</p>
			</section>
		</div>

	</div>

	<script src="js/reveal.js"></script>

	<script>

		// More info https://github.com/hakimel/reveal.js#configuration
		Reveal.initialize({
			controls: true,
			progress: true,
			center: true,
			hash: true,

			transition: 'slide', // none/fade/slide/convex/concave/zoom

			// More info https://github.com/hakimel/reveal.js#dependencies
			dependencies: [
				{ src: 'plugin/markdown/marked.js', condition: function () { return !!document.querySelector('[data-markdown]'); } },
				{ src: 'plugin/markdown/markdown.js', condition: function () { return !!document.querySelector('[data-markdown]'); } },
				{ src: 'plugin/highlight/highlight.js', async: true },
				{ src: 'plugin/search/search.js', async: true },
				{ src: 'plugin/zoom-js/zoom.js', async: true },
				{ src: 'plugin/notes/notes.js', async: true }
			]
		});

	</script>

</body>

</html>